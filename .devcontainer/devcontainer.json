{
  "name": "EFSA Pipeline Dev",

  "build": {
    "dockerfile": "Dockerfile.dev",
    "context": ".."
  },

  "workspaceFolder": "/EFSA_workspace",
  "remoteUser": "root",
  "overrideCommand": false,

  // Generate .inputrc (optional) + safe.directory + pre-seed known_hosts for git hosts
  "postCreateCommand": "printf '\"\\e[A\": history-search-backward\n\"\\e[B\": history-search-forward\nset show-all-if-ambiguous On\nset completion-ignore-case On\nset colored-stats On\nset visible-stats On\n' > /root/.inputrc && git config --file .git/config --add safe.directory ${containerWorkspaceFolder} && mkdir -p /root/.ssh && touch /root/.ssh/known_hosts && ssh-keyscan -T 5 github.com gitlab.com bitbucket.org >> /root/.ssh/known_hosts || true",

  "customizations": {
    "vscode": {
      "settings": {
        "python.defaultInterpreterPath": "/usr/local/bin/python3"
      },
      "extensions": [
        "ms-python.python",
        "ms-python.vscode-pylance",
        "ms-azuretools.vscode-docker",
        "njpwerner.autodocstring"
      ]
    }
  },

  "mounts": [
    // repo (remote) -> container
    "source=${localWorkspaceFolder},target=${containerWorkspaceFolder},type=bind,consistency=cached",

    // remote data dir -> container (change to your real path)
    "source=/mnt/raid/Projects/EFSA/bind_mount,target=${containerWorkspaceFolder}/data,type=bind,consistency=cached",

    // Docker on host (DooD)
    "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind",

    // SSH agent socket from the *remote shell* into container
    "source=${env:SSH_AUTH_SOCK},target=/ssh-agent,type=bind"
  ],

  "remoteEnv": {
    "SSH_AUTH_SOCK": "/ssh-agent"
  }
}
